# Dev configuaration
#
image:
  tag: 0.9.5
  
replicaCount: 1

podAnnotations: 
  vault.hashicorp.com/agent-inject: 'true'
  vault.hashicorp.com/role: 'testserver'
  vault.hashicorp.com/secret-volume-path: '/run/secrets'
  vault.hashicorp.com/agent-inject-secret-testsecret: 'local/data/testserver'
  vault.hashicorp.com/agent-inject-template-testsecret: |
    {{- with secret "local/data/testserver" }}
    {{ .Data.data.secret }}
    {{- end }}


env:
  - name: SECRET_FILE
    value: "/run/secrets/testsecret"
  - name: FLASK_ENV
    value: 'Test'

ingress:
  enabled: true
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: web
  hosts:
    - host: testserver-tst.mydomain.net
      paths:
        - path: /
          pathType: Prefix
          backend:
            service:
              name: testserver
              port:
                number: 80

persistence:
  enabled: true
  data:
    size: "1Gi"